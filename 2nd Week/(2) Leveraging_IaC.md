# 1. IAC(Terraform 등)로 VPC, 서브넷, 보안 그룹 등 변동이 적은 리소스까지 코드화해야 하는 이유와 그에 따른 관리 전략은?
## 1) 재현성(Reproducibility)
- 사람이 수동으로 만든 리소스는 문서화가 되지 않음
- 코드로 만들면 언제든지 동일한 환경을 생성할 수 있음
## 2) 변경 이력 추적
- 인프라 변화를 누가, 언제, 무엇을 했는 지 버전 관리 도구를 통해 확인 가능
- 변경 관리 절차에 따라 리뷰 가능
## 3) Drift 방지
- 콘솔에서 수정한 내용을 IaC를 통해서 탐지 가능(Terraform plan과 state)
- 매일 terraform plan 수행하여 변경 사항 확인
## 4) 재해복구
- 재해로 인하여 리전이나 AZ 사용이 불가능해도 언제든지 다른 곳에 생성 가능
# 2. IaC로 관리되는 리소스와 수동 생성 리소스의 싱크 불일치 발생 시 해결 방안은?
## 1) Terraform에서 제공하는 plan, state 기능을 이용하여 다른 항목을 찾는다.
    - 수동으로 테라폼 코드를 변경한다.
    - terraform apply를 통해서 강제 원복시킨다.
    - import를 통해서 강제로 편입시킨다.
## 2) 조직 차원의 방지책
    - IAM을 통하여 콘솔을 통한 접근 권한을 통제한다.
    - 주기적으로 Drift Detection 파이프라인을 구성한다.
    - 모든 변경은 PR기반으로만 처리한다.
# 3. Terraform State 파일의 잠금/충돌 방지 및 백업 전략은?
## 1) Remote Backend로 S3에 상태를 저장하고, DynamoDB에 Lock 정보를 저장한다.
- 백업을 위하여 S3 버저닝을 활성화하고 state의 스냅샷을 주기적으로 촬영하고 DR 리전에 복제한다.
# 4. VPC, 서브넷 등 네트워크 리소스의 변경이 서비스에 미치는 영향과 롤백 전략은?
## 1) 영향
- 라우팅 이상, 트래픽 차단 등 서비스가 정상적으로 통신하지 못하게 된다.
## 2) 롤백 전략
### 2.1 Blue/Green 네트워크 전략
- 서비스 점진 이전
- 문제 발생 시 DNS를 통해서 원복
### 2.2 Immutable 전략
- 기존 리소스는 수정하지 않고 새 리소스 생성 후 교체
# 5. IaC로 관리되는 리소스의 라이프사이클(생성~삭제) 자동화 시 주의할 점은?
- 주요 정보를 담고 있는 DB, S3를 삭제하거나 VPC 네트워크를 변경하는 것을 방지하기 위해 prevent_destroy를 통해서 삭제 방지 리소스를 설정해야 한다.
- CI에서 PR 리뷰 강제하여 휴먼 에러를 최소화한다.
- 애플리케이션 스택, 네트워크 스택, 데이터 스택 등으로 state를 분리해서 운영한다.
# 6. IaC 코드의 모듈화, 재사용성, 표준화 방안은?
## 1) 모듈화 (Modularity)
- 모듈은 관련 있는 리소스들을 하나의 꾸러미로 만드는 것(예: VPC, 서브넷, 라우팅 테이블을 묶어 'Network 모듈' 생성)
- 재사용 가능한 컴포넌트: 동일한 구성을 여러 환경(Dev, Stage, Prod)에서 반복 사용 가능
- 캡슐화: 복잡한 내부 로직은 숨기고, 필요한 설정값(Variable)만 입력받아 결과를 출력
- 버전 관리: 모듈을 별도의 Git 레지스트리로 관리하여 특정 버전을 호출(source = "...?ref=v1.2.0")해 안정성 확보
## 2) 2. 재사용성 극대화 방안
### 2.1 변수(Variables)와 Local 활용
- 환경별로 다른 값(인스턴스 타입, 리전 등)은 variables.tf로 분리
- 공통적으로 계산되어 쓰이는 값은 locals를 사용하여 코드 중복 최소화
### 2.2 Terraform Registry 활용
- 직접 모든 것을 만들기보다, 이미 검증된 Terraform Public Registry의 공식 모듈(VPC, EKS 등)을 가져와 우리 팀에 맞게 래핑(Wrapping)하여 사용
# 3. 표준화 및 거버넌스 (Standardization)
## 1) 네이밍 컨벤션 (Naming Convention)
- project-env-region-resource와 같은 명확한 규칙을 세우고, 이를 locals에서 생성하여 모든 리소스에 태그(Tag)로 강제 적용합니다.
## 2) 디렉토리 구조 표준화
- 보통 다음과 같은 구조를 표준으로 삼습니다.
    + modules/: 실제 리소스 정의 (재사용용)
    + environments/: 환경별 설정 (dev, prod 등)
    + main.tf: 모듈 호출
    + terraform.tfvars: 해당 환경의 구체적인 수치값
## 3) 코드 린팅 및 검사 도구
- terraform fmt: 코드 포맷 통일 검사
- TFLint: 잠재적인 에러나 클라우드 권장 사항 위반 검사.